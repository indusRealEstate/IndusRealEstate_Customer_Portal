<!-- <div id="full-screen-image">
  <button class="close-btn" title="Exit">

    <img
      matTooltip="Close"
      matTooltipClass="tooltip"
      matTooltipPosition="above"
      (click)="onCloseDialog()"
      class="mr-2 mt-1 close-icon"
      src="assets/img/svg/req-details/close-circle.svg"
      alt />
  </button>
  <img src alt id="image">
</div> -->

<div class="main-content" *ngIf="screenWidth > 430">
  <div class="container-fluid">
    <div class="row" *ngIf="!isContentLoading">
      <div class="col-md-7">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col-8">
                <div class="row">
                  <img
                    src="../../assets/img/maintenance.png"
                    alt=""
                    width="30"
                    height="30"
                    class="maintainance_img"
                  />
                  <h3 class="font-weight-bold">Maintenance Request Details</h3>
                  <img src="../../assets/img/flag-bold.png" width="30" height="30" style="margin-top: 1.5rem;" alt="" 
                  *ngIf="all_data.main_flag!=0">
                </div>
                <div class="row">
                  <div class="col-4">
                    <h5>Request date:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_request_date}}</h5>
                  </div>
                  <div class="col-4">
                    <h5>Request status:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_request_status}}</h5>
                  </div>
                  <div class="col-4">
                    <h5>Request Type:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_request_type}}</h5>
                  </div>
                </div>

                <div class="row mt-3">
                  <div class="col-4">
                    <h5>User Availability date:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_user_availability_date}}</h5>
                  </div>
                  <div class="col-4">
                    <h5>User Availability Time:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_user_availability_time}}</h5>
                  </div>
                  <div class="col-4">
                    <h5>Description</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_description}}</h5>
                  </div>
                </div>

                <div class="row mt-3">
                  <div class="col-4">
                    <h5>Request For:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_request_for}}</h5>
                  </div>
                  <!-- <div class="col-4">
                    <h5>Request Category:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_request_category}}</h5>
                  </div> -->
                  <!-- <div class="col-4">
                    <h5>Staff Assigned:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_staff_assigned}}</h5>
                  </div> -->
                </div>

                <!-- <div class="row mt-3">
                  <div class="col-4">
                    <h5>Flag:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_flag}}</h5>
                  </div>
                  <div class="col-4">
                    <h5>Archive:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_archive}}</h5>
                  </div>
                  <div class="col-4">
                    <h5>Spam:</h5>
                    <h5 class="font-weight-normal" *ngIf="all_data != null">{{all_data.main_spam}}</h5>
                  </div>
                </div> -->

                <div class="row mt-3">
                  <!-- <div class="col-4">
                    <h5>Feedback:</h5>
                    <h5 class="font-weight-normal" *ngFor="all_data != null"></h5>
                  </div> -->
                </div>
              </div>
              <div class="col-4">
                <button class="btn" id="see-all-img-btn" (click)="openDialog()">View all Media</button>
              </div>
            </div>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-md-12">
          <div class="card">
            <div class="card-body">
              <h3 class="font-weight-bold">User Details</h3>
              <div class="row">
                <div class="col-3">
                  <img
                    src="../../assets/img/user.png"
                    alt
                    class="card-img-top user-image m-auto rounded-circle img-fluid"
                    width="100%"
                  />
                </div>
                <div class="col-9">
                  <!-- <h4 class="user-name"></h4>
                          <span class="user-uid text-secondery"></span> -->
                  <ul class="user-details font-weight-bold">
                    <li>Name: {{all_data.user_name}}</li>
                    <li>Email: {{all_data.user_email}}</li>
                    <li>Alternative email: {{all_data.user_alternative_email}}</li>
                    <li>Phone:{{all_data.user_country_code_number}} - {{all_data.user_mobile_number}}</li>
                    <li>Alternative phone:{{all_data.user_country_code_alternative_number}} - {{all_data.user_alternative_mobile_number}}</li>
                    <li>Gender:{{all_data.user_gender}}</li>
                    <li>Nationality:{{all_data.user_nationality}}</li>
                    <li>DOB:{{all_data.user_dob}}</li>
                    <li>User Type:{{all_data.user_user_type}}</li>
                    <li>Id Type:{{all_data.user_id_type}}</li>
                    <li>Id Number:{{all_data.user_id_number}}</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-md-12">
            <!-- <div class="card">
              <div class="card-body">
                <h3 class="font-weight-bold">Property Details</h3>
              </div>
            </div> -->
            <div class="table-row">
              <div class="card main-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-9">
                      <h3 class=" font-weight-bold">Property details</h3>
                    </div>
                    <div class="col-md-3">
                      <button class="btn" id="see-all-img-btn" style="float: right;" (click)="navigateTopPropertyDetailPage(all_data.prop_property_id)">View Property Media</button>
                    </div>
                </div>
                  <table class="teble table-striped w-100 px-3 detail-table">
                    <thead class="thead">
                      <tr>
                        <th scope="col" class="p-3">Title</th>
                        <th scope="col" class="p-3">Details</th>
                      </tr>
                    </thead>
                    <tbody class="tbody text-uppercase">
                      <tr scope="row">
                        <th class="p-3 col-md-4" scope="row">property name</th>
                        <td class="p-3 col-md-8">{{all_data.prop_property_name}}</td>
                      </tr>
                      <tr scope="row">
                        <th class="p-3 col-md-4" scope="row">property address</th>
                        <td class="p-3 col-md-8">{{all_data.prop_address}}</td>
                      </tr>
                      <tr scope="row">
                        <th class="p-3 col-md-4" scope="row">property type</th>
                        <td class="p-3 col-md-8">{{all_data.prop_property_type}}</td>
                      </tr>
                      <tr scope="row">
                        <th class="p-3 col-md-4" scope="row">government id</th>
                        <td class="p-3 col-md-8">{{all_data.prop_govt_id}}</td>
                      </tr>
                      <tr scope="row">
                        <th class="p-3 col-md-4" scope="row">number of units</th>
                        <td class="p-3 col-md-8">{{all_data.prop_no_of_units}}</td>
                      </tr>
                      <tr scope="row">
                        <th class="p-3 col-md-4" scope="row">locality
                          name</th>
                        <td class="p-3 col-md-8">{{all_data.prop_locality_name}}</td>
                      </tr>
                      <tr scope="row">
                        <th class="p-3 col-md-4" scope="row">property incharge</th>
                        <td class="p-3 col-md-8">{{all_data.prop_property_in_charge}}</td>
                      </tr>
                      <tr scope="row">
                        <th class="p-3 col-md-4" scope="row">property description</th>
                        <td class="p-3 col-md-8">{{all_data.prop_description}}</td>
                      </tr>
                      <!-- SELECT * FROM `maintenance_requests`
                      JOIN properties ON maintenance_requests.property_id = properties.property_id 
                      JOIN properties_units ON maintenance_requests.unit_id = properties_units.unit_id
                       JOIN users ON maintenance_requests.user_id = users.user_id -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-5">
        <div class="row">
          <div class="card">
            <div class="card-body">
              
              <div class="row">
                <div class="col-6"><h3 class="font-weight-bold">Unit Details</h3></div>
                <div class="col-6">
                  <button class="btn" style="float: right" (click)="navigateToUnitDetailPage(all_data.unit_unit_id)">
                    View Unit
                  </button>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-4">
                  <!-- <img src="../../assets/img/rent.png" alt="" width="30" height="30"> --> 
                  
                  <h5>Unit Number:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_unit_no}}</h5>
                </div>
                <div class="col-4">
                  <h5>Unit Type:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_unit_type}}</h5>
                </div>
                <div class="col-4">
                  <h5>No of Parking:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_no_of_parking}}</h5>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-4">
                  <h5>Floor:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_floor}}</h5>
                </div>
                <div class="col-4">
                  <h5>Size:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_size}}</h5>
                </div>
                <div class="col-4">
                  <h5>Unit Type:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_unit_type}}</h5>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-4">
                  <h5>Status:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_status}}</h5>
                </div>
                <div class="col-4">
                  <h5>Bedroom:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_bedroom}}</h5>
                </div>
                <div class="col-4">
                  <h5>Bathroom:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_bathroom}}</h5>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-4">
                  <h5>Owner:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_owner}}</h5>
                </div>
                <!-- <div class="col-4">
                  <h5>Amenities:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_amenties}}</h5>
                </div> -->
                <div class="col-4">
                  <h5>Description:</h5>
                  <h5 class="font-weight-normal">{{all_data.unit_description}}</h5>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-3" *ngIf="request_feedback!=null">
          <div class="card">
            <div class="card-body">
              <h3 class="font-weight-bold" >Feedback</h3>
            
              <h4 class="font-weight-normal" *ngIf="request_feedback!=null">Satisfaction Level : {{request_feedback.mood}}</h4>
              <h4 class="font-weight-normal" *ngIf="request_feedback!=null">Feedback : {{request_feedback.details}}</h4>
              </div>
            </div>
        </div>

        <div class="row mt-3">
          <div class="card">
            <div class="card-body">
              <h3 class="font-weight-bold">Request Category</h3>
              <h4 class="font-weight-normal">{{all_data.main_request_category}}</h4> 
              
              </div>
            </div>
        </div>

        <div class="row mt-3">
          <div class="card">
            <div class="card-body">
              <h3 class="font-weight-bold">Assign Staff</h3>
              <div class="row">
                <div class="col-6">
                  <mat-form-field>
                    <mat-label>Assign Staff</mat-label>
                    <mat-select>
                      <mat-option *ngFor="let item of staff" [value]="item.value">
                        {{item.viewValue}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>Choose a date</mat-label>
                    <input matInput [matDatepicker]="picker">
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                  </mat-form-field>
                  <button mat-raised-button class="mt-3">Assign</button>
                </div>
                <div class="col-6">
                 
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="card">
            <div class="card-body">
              <h3 class="font-weight-bold">Change Request Status</h3>
              <div class="row">
                <div class="col-6">
                  <mat-form-field>
                    <mat-label>Select Status</mat-label>
                    <mat-select>
                      <mat-option *ngFor="let item of status" [value]="item.svalue">
                        {{item.sviewValue}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>Add Comment</mat-label>
                    <textarea matInput></textarea>
                  </mat-form-field>
                  <button mat-raised-button>Save</button>
                </div>
                <div class="col-6">
                  <!-- <button mat-raised-button type="button" (click)="fileInput.click()" style="float:left;" id="imgInp">
                    <span>Add Attachment</span>
                    <input #fileInput type="file" (change)="onFileInput($event)" style="display:none;" />
                  </button> -->
                  <div class="row">
                    <div (click)="fileInput.click()"  class="btn ml-4" style="background: #d4aa32"> Add Documents </div>
                  </div>
                  <input multiple hidden (change)="onFileSelected($event.target.files)" #fileInput type="file" id="file"/>

                  <div *ngIf="docsFilesUploaded.length != 0">
                    <div
                      *ngFor="let file of docsFilesUploaded;let index=index"
                      class="row m-0 mt-2 align-items-center"
                      style="
                        background: #d4aa3230;
                        border: solid 1px #d4aa32;
                        border-radius: 5px;
                        padding: 10px 10px;
                      "
                    >
                      <img src="assets/img/svg/documents/document-text.svg" alt="" />
                      <div class="row">
                      <span
                        class="m-0 ml-3"
                        style="
                          font-weight: 500;
                          text-overflow: ellipsis;
                          max-width: 230px;
                          overflow: hidden;
                          white-space: nowrap;
                        "
                        >{{file.name}}</span
                      >
                      </div>
                      <img
                        (click)="removeUploadedDoc(index)"
                        src="assets/img/svg/success-dialog/close-square.svg"
                        alt=""
                        style="
                        position: absolute;
                          right: 20px;
                          width: 20px;
                          cursor: pointer;
                        "
                      />
                    
                      <!-- <img
                        (click)="removeUploadedDoc(index)"
                        src="assets/img/svg/success-dialog/close-square.svg"
                        alt=""
                        style="
                          position: absolute;
                          right: 10px;
                          width: 20px;
                          cursor: pointer;
                        "
                      /> -->
                    </div>
                  </div>
                </div>
              </div> 
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="card">
            <div class="card-body">
              <h3 class="font-weight-bold">Attached Documents</h3>
              <div class="row">
                <div class="col-6">
                  <div class="row">
                    <div (click)="fileInput2.click()"  class="btn ml-4" style="background: #d4aa32"> Add Documents </div>
                  </div>
                  <input multiple hidden (change)="onFileSelected2($event.target.files)" #fileInput2 type="file" id="file"/>

                  <div *ngIf="docsFilesUploaded2.length != 0">
                    <div
                      *ngFor="let file of docsFilesUploaded2;let index=index"
                      class="row m-0 mt-2 align-items-center"
                      style="
                        background: #d4aa3230;
                        border: solid 1px #d4aa32;
                        border-radius: 5px;
                        padding: 10px 10px;
                      "
                    >
                      <img src="assets/img/svg/documents/document-text.svg" alt="" />
                      <div class="row">
                      <span
                        class="m-0 ml-3"
                        style="
                          font-weight: 500;
                          text-overflow: ellipsis;
                          max-width: 230px;
                          overflow: hidden;
                          white-space: nowrap;
                        "
                        >{{file.name}}</span
                      >
                      </div>
                      <img
                        (click)="removeUploadedDoc2(index)"
                        src="assets/img/svg/success-dialog/close-square.svg"
                        alt=""
                        style="
                        position: absolute;
                          right: 20px;
                          width: 20px;
                          cursor: pointer;
                        "
                      /> 
                    
                      <!-- <img
                        (click)="removeUploadedDoc(index)"
                        src="assets/img/svg/success-dialog/close-square.svg"
                        alt=""
                        style="
                          position: absolute;
                          right: 10px;
                          width: 20px;
                          cursor: pointer;
                        "
                      /> -->
                    </div>
                  </div>
                </div>
              </div>
              
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
</div>
