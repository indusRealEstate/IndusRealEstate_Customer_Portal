<div id="full-screen-image">
  <button class="close-btn" title="Exit">
    <img
      matTooltip="Close"
      matTooltipClass="tooltip"
      matTooltipPosition="above"
      (click)="onCloseDialog()"
      class="mr-2 mt-1 close-icon"
      src="assets/img/svg/req-details/close-circle.svg"
      alt
    />
  </button>
  <img src alt id="image" />
</div>

<div
  class="main-content"
  style="margin-top: 50px; padding: 30px 40px"
  *ngIf="screenWidth > 430"
>
  <div class="container-fluid" style="max-width: 100vw">
    <ngx-skeleton-loader
      *ngIf="isContentLoading"
      [theme]="{ width: (700) + 'px', height: '40px' }"
    >
    </ngx-skeleton-loader>
    <div class="row m-0 justify-content-between" *ngIf="!isContentLoading">
      <span class="item-header">
        {{all_data.prop_address}}, {{all_data.prop_name}}
      </span>

      <div class="row m-0">
        <img
          matTooltip="Share Property"
          matTooltipClass="tooltip"
          matTooltipPosition="above"
          src="assets/img/svg/share.svg"
          alt=""
          style="
            filter: invert(95%) sepia(37%) saturate(5934%) hue-rotate(328deg)
              brightness(88%) contrast(87%);
            width: 25px;
            cursor: pointer;
          "
        />
        <img
          class="mx-4"
          matTooltip="More Actions"
          matTooltipClass="tooltip"
          matTooltipPosition="above"
          src="assets/img/svg/home-page/more.svg"
          alt=""
          style="
            filter: brightness(0) saturate(100%) invert(73%) sepia(8%)
              saturate(14%) hue-rotate(333deg) brightness(91%) contrast(77%);
            width: 25px;
            cursor: pointer;
          "
        />
      </div>
    </div>

    <ngx-skeleton-loader
      *ngIf="isContentLoading"
      [theme]="{ width: (screenWidth - 120) + 'px', height: '50vh' }"
    >
    </ngx-skeleton-loader>
    <div class="row" *ngIf="!isContentLoading">
      <div class="col-md-12">
        <div class="card carousel-card">
          <div
            id="carouselExampleIndicators"
            class="carousel slide"
            data-ride="carousel"
            data-pause="Hover"
          >
            <ol class="carousel-indicators" id="indicator"></ol>
            <div class="carousel-inner" #carousel id="carousel"></div>
            <a
              class="carousel-control-prev"
              href="#carouselExampleIndicators"
              role="button"
              data-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="sr-only">Previous</span>
            </a>
            <a
              class="carousel-control-next"
              href="#carouselExampleIndicators"
              role="button"
              data-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>
      </div>
    </div>

    <ngx-skeleton-loader
      *ngIf="isContentLoading"
      [theme]="{ width: (screenWidth - 120) + 'px', height: '50vh' }"
    >
    </ngx-skeleton-loader>
    <div class="row" *ngIf="!isContentLoading">
      <div class="col-md-12">
        <div class="table-row">
          <div class="card main-card" style="margin-top: 10px">
            <div class="card-header">
              <h4 class="overview-header">Property details</h4>
            </div>
            <div class="card-body">
              <table class="teble table-striped w-100 px-3 detail-table">
                <thead class="thead">
                  <tr>
                    <th scope="col" class="p-3">Title</th>
                    <th scope="col" class="p-3">Details</th>
                  </tr>
                </thead>
                <tbody class="tbody text-uppercase">
                  <tr scope="row">
                    <th class="p-3 col-md-4" scope="row">property name</th>
                    <td class="p-3 col-md-8">{{all_data.prop_name}}</td>
                  </tr>
                  <tr scope="row">
                    <th class="p-3 col-md-4" scope="row">property address</th>
                    <td class="p-3 col-md-8">{{all_data.prop_address}}</td>
                  </tr>
                  <tr scope="row">
                    <th class="p-3 col-md-4" scope="row">property type</th>
                    <td class="p-3 col-md-8">{{all_data.prop_type}}</td>
                  </tr>
                  <tr scope="row">
                    <th class="p-3 col-md-4" scope="row">government id</th>
                    <td class="p-3 col-md-8">{{all_data.prop_gov_id}}</td>
                  </tr>
                  <tr scope="row">
                    <th class="p-3 col-md-4" scope="row">number of units</th>
                    <td class="p-3 col-md-8">{{all_data.prop_no_of_units}}</td>
                  </tr>
                  <tr scope="row">
                    <th class="p-3 col-md-4" scope="row">locality name</th>
                    <td class="p-3 col-md-8">
                      {{all_data.prop_locality_name}}
                    </td>
                  </tr>
                  <tr scope="row">
                    <th class="p-3 col-md-4" scope="row">property incharge</th>
                    <td class="p-3 col-md-8">{{all_data.prop_in_charge}}</td>
                  </tr>
                  <tr scope="row" *ngIf="all_data.prop_description !== ''">
                    <th class="p-3 col-md-4" scope="row">
                      property description
                    </th>
                    <td class="p-3 col-md-8">{{all_data.prop_description}}</td>
                  </tr>
                  <tr scope="row">
                    <th class="p-3 col-md-4" scope="row">Documents</th>
                    <td class="col" style="padding: 30px !important">
                      <mat-form-field style="width: 60%">
                        <mat-label>Select Document</mat-label>
                        <mat-select [(ngModel)]="selected_document">
                          <mat-option
                            *ngFor="let item of prop_doc"
                            [value]="item"
                          >
                            {{item}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <button
                        [ngStyle]="{'background-color' : selected_document == '' ? 'grey' : '#2b333e', 'cursor': selected_document == '' ? 'not-allowed' : 'pointer'}"
                        class="btn"
                        (click)="downloadDoc()"
                        title="DOWNLOAD DOC"
                      >
                        Download Doc
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <ngx-skeleton-loader
      *ngIf="isContentLoading"
      [theme]="{width: ((screenWidth / 3) - 150) + 'px', height: '30vh', margin: '1rem'}"
    >
    </ngx-skeleton-loader>
    <div class="row" *ngIf="!isContentLoading">
      <!-- <div
        class="col-md-4"
        *ngIf="!isContentLoading && all_data.user_uid !== ''"
      >
        <div class="card card-main">
          <div class="card-header">
            <h4 class="overview-header">Owner details</h4>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-3 d-flex">
                <img
                  src="https://www.indusre.app/api/upload/user/{{all_data.user_uid}}/image/{{all_data.user_profile_img}}"
                  alt
                  class="card-img-top user-image m-auto"
                />
              </div>
              <div class="col-9">
                <ul class="user-details">
                  <li>Name: {{all_data.user_name}}</li>
                  <li>Email: {{all_data.user_email}}</li>
                  <li>
                    Alternative email: {{all_data.user_alternative_email}}
                  </li>
                  <li>
                    Phone: {{all_data.user_country_code_number}} -
                    {{all_data.user_mobile_number}}
                  </li>
                  <li>
                    Alternative phone:
                    {{all_data.user_country_code_alternative_number}} -
                    {{all_data.user_alternative_mobile_number}}
                  </li>
                  <li>Gender: {{all_data.user_gender}}</li>
                </ul>
              </div>
            </div>
            <div class="row d-flex justify-content-center">
              <button class="call-btn btn" (click)="call_person()" title="CALL">
                <img src="assets/img/svg/common-icons/phone.svg" alt />
                <span
                  >{{all_data.user_gender == 'male' ? 'Call him': 'Call
                  her'}}</span
                >
              </button>

              <button
                class="email-btn btn"
                (click)="email_person()"
                title="MAIL"
              >
                <img src="assets/img/svg/common-icons/email-with-at.svg" alt />
                <span
                  >{{all_data.user_gender == 'male' ? 'Mail him': 'Mail
                  her'}}</span
                >
              </button>
            </div>
          </div>
        </div>
      </div> -->

      <div class="col">
        <div class="table-row">
          <div class="card main-card">
            <div class="card-header">
              <div class="row m-0 justify-content-between">
                <h4 class="overview-header">Units</h4>
                <span style="font-weight: 500; color: #d4aa32; font-size: 18px"
                  >Total Units from Property : {{all_data.units.length}}</span
                >
              </div>
            </div>
            <div class="card-body">
              <table class="teble table-striped w-100 px-3 detail-table">
                <thead class="thead">
                  <tr>
                    <th scope="col" class="p-3">unit number</th>
                    <th scope="col" class="p-3">unit status</th>
                    <th scope="col" class="p-3">link</th>
                  </tr>
                </thead>
                <tbody class="tbody text-uppercase">
                  <tr
                    scope="row"
                    *ngFor="let item of all_data.units; let index = i"
                  >
                    <th class="p-3 col-md-4" scope="row">{{item.unit_no}}</th>
                    <td class="p-3 col-md-4">{{item.status}}</td>
                    <td class="p-3 col-md-4">
                      <button
                        (click)="navigateToDetailPage(item.unit_id)"
                        class="btn open-external-link-icon"
                        title="extenal"
                      >
                        <img
                          src="assets/img/svg/common-icons/open-external-link-icon.svg"
                          alt
                        />
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
