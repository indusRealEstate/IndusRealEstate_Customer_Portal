<!------------------------------------ Desktop Screen ----------------------------------------------------->
<!------------------------------------ Desktop Screen ----------------------------------------------------->
<!------------------------------------ Desktop Screen ----------------------------------------------------->
<div class="main-content reports-bg p-0 m-0" *ngIf="screenWidth > 430">
  <div
    class="container-fluid h-100 d-flex justify-content-center"
    style="max-width: 2576px"
  >
    <div class="col" style="padding: 0">
      <div class="row m-0 w-100 align-items-end justify-content-between">
        <div class="row m-0 align-items-end mb-3">
          <p class="m-0 ml-4 mt-5" style="font-size: 2rem; font-weight: 600">
            {{tableTitle}}
          </p>

          <table-filters
            #table_filter
            (refresh)="refreshTable()"
            (showAllFlaggedReqs)="showAllFlaggedRequests()"
            (closeFlaggedReqs)="closeFlaggedRequestFilter()"
            (closeStatusFilterEmitter)="closeStatusFilter()"
            (timeLineFilter)="filterByTimeline()"
            (closeTimeLineFilterEmitter)="closeTimelineFilter()"
          ></table-filters>
        </div>
        <div class="row m-0 align-items-end mb-3">
          <searchbar-table (myEvent)="applyFilter($event)"></searchbar-table>
        </div>
      </div>

      <loading-table-admin-reqs
        *ngIf="isContentLoading == true"
      ></loading-table-admin-reqs>

      <!------------------------------------ All Properties ----------------------------------------------------->
      <!------------------------------------ All Properties ----------------------------------------------------->
      <!------------------------------------ All Properties ----------------------------------------------------->
      <div *ngIf="isContentLoading == false">
        <div style="overflow: auto; padding: 0 5px; padding-bottom: 1rem">
          <table
            mat-table
            [dataSource]="allRequestsMatTableData"
            class="mat-elevation-z8 demo-table"
            *ngIf="allRequestsMatTableData.data.length != 0"
          >
            <!-- Name Column -->
            <ng-container matColumnDef="request_id">
              <th mat-header-cell *matHeaderCellDef>Request ID</th>
              <td
                class="request-id"
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'first-col-last' : 'first-col'"
                (click)="viewRequestsDetails(element)"
                style="width: 150px; padding: 10px 15px"
              >
                {{ element.request_id}}
              </td>
            </ng-container>

            <ng-container matColumnDef="request_date">
              <th mat-header-cell *matHeaderCellDef>Request Date</th>
              <td
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'second-col-last' : 'second-col'"
                (click)="viewRequestsDetails(element)"
              >
                {{ element.request_date | date:'M/d/y' }}
              </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="request_time">
              <th mat-header-cell *matHeaderCellDef>Tenant Available Time</th>
              <td
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'third-col-last' : 'third-col'"
                (click)="viewRequestsDetails(element)"
              >
                {{ element.user_availability_time }}
              </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="request_type">
              <th mat-header-cell *matHeaderCellDef>Request Type</th>
              <td
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'fourth-col-last' : 'fourth-col'"
                (click)="viewRequestsDetails(element)"
              >
                <div>{{ element.request_type | titlecase}}</div>
              </td>
            </ng-container>

            <ng-container matColumnDef="building">
              <th mat-header-cell *matHeaderCellDef>Building</th>
              <td
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'fifth-col-last' : 'fifth-col'"
              >
                <span
                  class="prop_name"
                  (click)="navigateToPropertyDetailsPage(element.property_id)"
                  >{{ getbuildingName(element.property_id) }}</span
                >
              </td>
            </ng-container>

            <ng-container matColumnDef="unitNo">
              <th mat-header-cell *matHeaderCellDef>Unit No.</th>
              <td
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'fifth-col-last' : 'fifth-col'"
              >
                <span
                  class="prop_name"
                  (click)="navigateToUnitDetailPage(element.unit_id)"
                  >{{ getUnitNo(element.unit_id) }}</span
                >
              </td>
            </ng-container>

            <ng-container matColumnDef="reqFor">
              <th mat-header-cell *matHeaderCellDef>Request For</th>
              <td
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'fifth-col-last' : 'fifth-col'"
                (click)="viewRequestsDetails(element)"
              >
                {{ element.request_for | titlecase}}
              </td>
            </ng-container>

            <ng-container matColumnDef="reqcategory">
              <th mat-header-cell *matHeaderCellDef>Request Category</th>
              <td
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'fifth-col-last' : 'fifth-col'"
                (click)="viewRequestsDetails(element)"
              >
                {{ element.request_category}}
              </td>
            </ng-container>
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Request Status</th>
              <td
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'fifth-col-last' : 'fifth-col'"
                (click)="viewRequestsDetails(element)"
              >
                {{ element.request_status | titlecase}}
              </td>
            </ng-container>
            <ng-container matColumnDef="staff">
              <th mat-header-cell *matHeaderCellDef>Assigned Staff</th>
              <td
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'fifth-col-last' : 'fifth-col'"
              >
                <!-- <button
                matTooltip="View all assign staff"
                matTooltipClass="tooltip"
                matTooltipPosition="above"
                class="btn text-uppercase" style="background-color: #d3ab33;" (click)="viewAllAssignStaffList(element)">view staff</button> -->
                <span *ngIf="!isNameEmpty(element.staff_assigned)">-</span>
                <span *ngIf="isNameEmpty(element.staff_assigned)"
                  >{{getOnlyName(element.staff_assigned)}}</span
                >
              </td>
            </ng-container>
            <ng-container matColumnDef="userName">
              <th mat-header-cell *matHeaderCellDef>Requested User</th>
              <td
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'fifth-col-last' : 'fifth-col'"
              >
                <span
                  class="prop_name"
                  (click)="navigateToUserDetailsPage(element.user_id)"
                  >{{ getUserName(element.user_id) }}</span
                >
              </td>
            </ng-container>

            <ng-container matColumnDef="more">
              <th mat-header-cell *matHeaderCellDef>More</th>
              <td
                class="more-btn"
                mat-cell
                *matCellDef="let element;let last = last"
                [ngClass]="last ? 'eighth-col-last' : 'eighth-col'"
              >
                <img
                  [matMenuTriggerFor]="menu"
                  matTooltip="More Actions"
                  matTooltipClass="tooltip"
                  matTooltipPosition="above"
                  src="assets/img/svg/home-page/more.svg"
                  alt
                  style="
                    filter: brightness(0) saturate(100%) invert(73%) sepia(8%)
                      saturate(14%) hue-rotate(333deg) brightness(91%)
                      contrast(77%);
                    width: 20px;
                    cursor: pointer;
                  "
                />

                <img
                  *ngIf="element.flag == 1"
                  matTooltip="Show All Flagged Requests"
                  matTooltipClass="tooltip"
                  matTooltipPosition="above"
                  class="flag ml-4"
                  src="assets/img/pngs/flag-bold.png"
                  alt
                />

                <mat-menu #menu="matMenu" class="more-menu">
                  <button
                    mat-menu-item
                    class="more-archived"
                    (click)="element.flag == '0' ? updateMore(element,'flag') : updateMore(element,'unflag')"
                  >
                    {{element.flag == '0' ? 'Flag' : 'Unflag'}}
                  </button>
                  <button
                    mat-menu-item
                    class="more-archived"
                    (click)="updateMore(element,'archived')"
                  >
                    Archived
                  </button>
                  <button
                    mat-menu-item
                    class="more-span"
                    (click)="updateMore(element,'spam')"
                  >
                    Spam
                  </button>
                  <button
                    mat-menu-item
                    class="more-delete"
                    (click)="updateMore(element,'delete')"
                  >
                    Delete
                  </button>
                </mat-menu>
              </td>
            </ng-container>

            <!-- Symbol Column -->

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: displayedColumns"
              class="unit-row"
            ></tr>
          </table>
          <div
            *ngIf="allRequestsMatTableData.filteredData.length == 0 && allRequestsMatTableData.data.length != 0"
            class="d-flex align-items-center justify-content-center"
            style="
              background: white;
              margin-top: 0;
              text-align: center;
              box-shadow: 0px 2px 2px -3px rgba(0, 0, 0, 0.2),
                0px 0px 1px -5px rgba(0, 0, 0, 0.14),
                0px 6px 9px 0px rgba(0, 0, 0, 0.12);
              border-bottom-left-radius: 10px;
              border-bottom-right-radius: 10px;
              height: 15rem;
              min-width: 1800px;
            "
          >
            <p style="font-size: 1.5rem; font-weight: 500; color: #d3ab33">
              NO RESULTS :(
            </p>
          </div>
          <table
            *ngIf="allRequestsMatTableData.data.length == 0"
            mat-table
            [dataSource]="loadingTable"
            class="mat-elevation-z8 demo-table"
          >
            <!-- Name Column -->
            <ng-container matColumnDef="request_id">
              <th mat-header-cell *matHeaderCellDef>Request ID</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>

            <ng-container matColumnDef="request_date">
              <th mat-header-cell *matHeaderCellDef>Request Date</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="request_time">
              <th mat-header-cell *matHeaderCellDef>Request Time</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="request_type">
              <th mat-header-cell *matHeaderCellDef>Request Type</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>
            <ng-container matColumnDef="building">
              <th mat-header-cell *matHeaderCellDef>Building</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>
            <ng-container matColumnDef="unitNo">
              <th mat-header-cell *matHeaderCellDef>Unit No.</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>
            <ng-container matColumnDef="reqFor">
              <th mat-header-cell *matHeaderCellDef>Request For</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>
            <ng-container matColumnDef="reqcategory">
              <th mat-header-cell *matHeaderCellDef>Request Category</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Request Status</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>
            <ng-container matColumnDef="staff">
              <th mat-header-cell *matHeaderCellDef>Assigned Staff</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>
            <ng-container matColumnDef="userName">
              <th mat-header-cell *matHeaderCellDef>Requested User</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>
            <ng-container matColumnDef="more">
              <th mat-header-cell *matHeaderCellDef>More</th>
              <td mat-cell *matCellDef="let element;let last = last"></td>
            </ng-container>

            <!-- Symbol Column -->

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
          <div
            *ngIf="allRequestsMatTableData.data.length == 0"
            class="d-flex align-items-center justify-content-center"
            style="
              background: white;
              margin-top: -16rem;
              text-align: center;
              box-shadow: 0px 2px 2px -3px rgba(0, 0, 0, 0.2),
                0px 0px 1px -5px rgba(0, 0, 0, 0.14),
                0px 6px 9px 0px rgba(0, 0, 0, 0.12);
              border-bottom-left-radius: 10px;
              border-bottom-right-radius: 10px;
              height: 20rem;
              min-width: 1800px;
            "
          >
            <p style="font-size: 1.5rem; font-weight: 500; color: #d3ab33">
              No Requests
            </p>
            <p
              class="pl-3"
              style="font-size: 1.3rem; font-weight: 500; color: #d3ab33"
            >
              (－_－) zzZ
            </p>
          </div>
        </div>
        <div style="margin-top: 25px" class="table-paginator">
          <mat-paginator
            #paginator
            [pageSizeOptions]="[6, 8, 10, 14, 20]"
            showFirstLastButtons
          ></mat-paginator>
        </div>
      </div>
      <!-- </div> -->
      <!-- </div> -->
      <!-- </div> -->
    </div>
  </div>
</div>
