<div class="main-content">
  <div class="container-fluid" style="max-width: 2576px">
    <div class="row m-0">
      <img
        navigateBack
        class="back-btn-icon ml-4"
        src="assets/img/svg/request-page/arrow-left.svg"
        alt=""
      />

      <p class="m-0 ml-4" style="font-size: 2rem; font-weight: 600">
        Request Details
      </p>
    </div>

    <div class="card">
      <div class="card-body" style="padding: 2rem 2.5rem">
        <div class="row m-0">
          <div class="col pl-0">
            <p class="prop">Request Type</p>
            <p class="prop-data">{{getRequestType()}}</p>

            <p class="prop mt-2">Request ID</p>
            <p class="prop-data">{{getRequestId()}}</p>
          </div>
          <div class="col">
            <p class="prop mt-2">Issued Date</p>
            <p class="prop-data">{{getIssuedDate()}}</p>
          </div>
          <div class="col">
            <p class="prop">Document</p>
            <div class="btn doc-btns" (click)="viewRequestDoc()">
              View Document
            </div>
            <div class="links mt-3">Request for document update</div>
          </div>
          <div class="col">
            <div
              style="
                background: #ffe8af70;
                padding: 10px 20px;
                border-radius: 8px;
                padding-bottom: 20px;
              "
            >
              <div class="row">
                <div class="col">
                  <p
                    style="
                      font-size: 13px;
                      font-weight: 500;
                      margin: 0;
                      color: #8f8f8fcf;
                    "
                  >
                    Current Status
                  </p>
                  <div class="mt-3" [ngClass]="getRequestStatus()"></div>
                  <div class="links mt-3" (click)="viewStatusChangeBar()">
                    Change Status
                  </div>

                  <div
                    #status_update_mini_bar
                    style="
                      display: none;
                      width: 20rem;
                      height: 20rem;
                      background: white;
                      position: absolute;
                      z-index: 100;
                      box-shadow: 0px 2px 2px -3px rgba(0, 0, 0, 0.2),
                        0px 1px 2px -2px rgba(0, 0, 0, 0.14),
                        0px 1px 6px 1px rgba(0, 0, 0, 0.12);
                      border-radius: 7px;
                      padding: 1rem 1.5rem;
                    "
                  >
                    <div
                      class="row m-0 justify-content-between d-flex align-center"
                    >
                      <p class="m-0" style="font-weight: 600; color: #b6b6b6">
                        Request Status Update
                      </p>
                      <img
                        matTooltip="Close"
                        matTooltipClass="tooltip"
                        matTooltipPosition="above"
                        (click)="viewStatusChangeBar()"
                        class="close-icon"
                        src="assets/img/svg/req-details/close-circle.svg"
                        alt=""
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col">
            <p class="prop">Request For</p>
            <p class="prop-data">{{requestFor()}}</p>
            <p class="prop mt-2">Requested By</p>
            <p class="prop-data">{{requestedBy()}}</p>
          </div>
          <div class="col">
            <div class="btn doc-btns" *ngIf="requestFor() == 'Admin'">
              Approve
            </div>
            <div class="btn doc-btns" *ngIf="requestFor() == 'Tenant'">
              Forward to Tenant
            </div>
            <div class="btn doc-btns" *ngIf="requestFor() == 'Landlord'">
              Forward to Landlord
            </div>
            <div class="btn doc-btns-decline">Decline Request</div>
            <div class="links mt-3">Request for Updation</div>
          </div>
          <div class="col-1 d-flex justify-content-end">
            <img
              matTooltip="Important Request"
              matTooltipClass="tooltip"
              matTooltipPosition="above"
              *ngIf="req.flag == 1"
              style="height: 3rem"
              src="assets/img/pngs/flag-bold.png"
              alt=""
            />
            <img
              matTooltip="Archived Request"
              matTooltipClass="tooltip"
              matTooltipPosition="above"
              *ngIf="req.archive == 1"
              style="
                height: 2rem;
                filter: invert(46%) sepia(93%) saturate(855%) hue-rotate(20deg)
                  brightness(94%) contrast(95%);
              "
              src="assets/img/pngs/archive.png"
              alt=""
            />
            <img
              matTooltip="Reported As Spam"
              matTooltipClass="tooltip"
              matTooltipPosition="above"
              *ngIf="req.spam == 1"
              style="
                height: 2rem;
                filter: invert(11%) sepia(91%) saturate(7496%) hue-rotate(9deg)
                  brightness(91%) contrast(114%);
              "
              src="assets/img/pngs/spam-icon.png"
              alt=""
            />
          </div>
        </div>
        <p class="mt-4 mb-4 details-title">User Details</p>
        <div class="row m-0">
          <div class="col pl-0" *ngIf="profile_img_loading == true">
            <ngx-skeleton-loader [theme]="{ width: '9rem', height: '9rem' }">
            </ngx-skeleton-loader>
          </div>
          <div class="col pl-0" *ngIf="profile_img_loading == false">
            <div
              *ngIf="req.profile_photo != '' && req.profile_photo != undefined"
              style="
                width: 9rem;
                height: 9rem;
                overflow: hidden;
                background-image: url('{{usrImgPath}}{{req.profile_photo}}');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                border-radius: 6px;
              "
            ></div>
            <img
              *ngIf="req.profile_photo == '' || req.profile_photo == undefined"
              src="assets/img/faces/avatar.webp"
              alt=""
              style="
                max-width: 8rem;
                min-width: 8rem;
                max-height: 8rem;
                min-height: 8rem;
                border-radius: 6px;
                user-select: none;
                pointer-events: none;
              "
            />
          </div>
          <div class="col">
            <p class="prop">Name</p>
            <p class="prop-data">
              {{req.firstname | titlecase}} {{req.lastname | titlecase}}
            </p>

            <p class="prop mt-2">Address</p>
            <p class="prop-data">{{req.address}}</p>
          </div>
          <div class="col">
            <p class="prop">Email</p>
            <p class="prop-data">{{req.email}}</p>

            <p class="prop mt-2">Phone No.</p>
            <p class="prop-data" *ngIf="req.request_type != 'NEW_LANDLORD_REQ'">
              {{req.phone_number}}
            </p>
            <p class="prop-data" *ngIf="req.request_type == 'NEW_LANDLORD_REQ'">
              {{req.mobile_no}}
            </p>
          </div>
          <div class="col">
            <p class="prop">Passport No.</p>
            <p class="prop-data">{{req.passport_no}}</p>

            <p class="prop mt-2">Passport Expiry</p>
            <p class="prop-data">{{req.passport_exp}}</p>
          </div>
          <div
            class="col"
            *ngIf="req.request_type != 'NEW_LANDLORD_REQ' &&  req.request_type != 'NEW_TENANT_AC'"
          >
            <p class="prop">Joined date</p>
            <p class="prop-data">{{req.joined_date}}</p>
          </div>
          <div class="col">
            <div class="btn doc-btns mr-2">Message</div>
            <div class="btn doc-btns">Report</div>
            <div class="links mt-3">More Details</div>
          </div>
        </div>
        <p class="mt-5 mb-4 details-title">Property Details</p>
        <div class="row m-0">
          <div class="col pl-0">
            <p class="prop">Name</p>
            <p
              class="prop-data"
              *ngIf="req.request_type != 'ADD_PROPERTY_REC_EXIST_LANDLORD' && req.request_type != 'NEW_LANDLORD_REQ'"
            >
              {{req.property_name}}
            </p>
            <p
              class="prop-data"
              *ngIf="req.request_type == 'ADD_PROPERTY_REC_EXIST_LANDLORD' || req.request_type == 'NEW_LANDLORD_REQ'"
            >
              {{req.property_building_name}}
            </p>

            <p class="prop mt-2">Address</p>
            <p class="prop-data">{{req.property_address}}</p>
          </div>
          <div class="col">
            <p class="prop">Type</p>
            <p class="prop-data">{{req.property_type}}</p>

            <p class="prop mt-2">Community</p>
            <p
              class="prop-data"
              *ngIf="req.request_type != 'ADD_PROPERTY_REC_EXIST_LANDLORD' && req.request_type != 'NEW_LANDLORD_REQ'"
            >
              {{req.property_community_name}}
            </p>
            <p
              class="prop-data"
              *ngIf="req.request_type == 'ADD_PROPERTY_REC_EXIST_LANDLORD' || req.request_type == 'NEW_LANDLORD_REQ'"
            >
              {{req.property_community}}
            </p>
          </div>
          <div
            class="col"
            *ngIf="req.request_type != 'NEW_LANDLORD_REQ' && req.request_type != 'NEW_TENANT_AC' && req.request_type != 'ADD_PROPERTY_REC_EXIST_LANDLORD'"
          >
            <div
              style="
                background: #ffe8af70;
                padding: 20px 20px;
                border-radius: 8px;
              "
            >
              <div class="row">
                <div class="col">
                  <p
                    style="
                      font-size: 13px;
                      font-weight: 500;
                      margin: 0;
                      color: #8f8f8fcf;
                    "
                  >
                    Landlord
                  </p>
                  <p
                    *ngIf="landlord_details != undefined"
                    class="mt-2"
                    style="font-size: 15px; font-weight: 500; color: #b68c03"
                  >
                    {{landlord_details.firstname}} {{landlord_details.lastname}}
                  </p>
                </div>
                <div class="col">
                  <p
                    style="
                      font-size: 13px;
                      font-weight: 500;
                      margin: 0;
                      color: #8f8f8fcf;
                    "
                  >
                    Tenants Count
                  </p>
                  <p
                    *ngIf="landlord_tenant_count != undefined"
                    class="mt-2"
                    style="font-size: 15px; font-weight: 500; color: #b68c03"
                  >
                    {{landlord_tenant_count}}
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="links mt-3">Property Related Documents</div>
            <div class="links mt-2">Go to Property Details Page</div>
          </div>
        </div>
        <p
          class="mt-5 mb-4 details-title"
          *ngIf="req.request_type != 'NEW_LANDLORD_REQ' && req.request_type != 'NEW_TENANT_AC'"
        >
          Other Details
        </p>
        <div
          class="mt-4"
          *ngIf="req.request_type == 'NEW_LANDLORD_REQ' || req.request_type == 'NEW_TENANT_AC'"
        ></div>
        <div class="row m-0">
          <div
            class="col-2 pl-0"
            *ngIf="req.request_type != 'NEW_LANDLORD_REQ' && req.request_type != 'NEW_TENANT_AC'"
          >
            <p class="prop">User Total Requests</p>
            <p class="prop-data">{{user_total_reqs}}</p>

            <p class="prop mt-2">Pending Requests</p>
            <p class="prop-data">{{user_pending_reqs}}</p>
          </div>
          <div
            class="col-2"
            *ngIf="req.request_type != 'NEW_LANDLORD_REQ' && req.request_type != 'NEW_TENANT_AC'"
          >
            <p class="prop">Reviewing Requests</p>
            <p class="prop-data">{{user_review_reqs}}</p>
          </div>
          <div
            class="col-2"
            *ngIf="req.request_type != 'NEW_LANDLORD_REQ' && req.request_type != 'NEW_TENANT_AC'"
          >
            <p class="prop">Approved Requests</p>
            <p class="prop-data">{{user_approved_reqs}}</p>
            <p class="prop mt-2">Declined Requests</p>
            <p class="prop-data">{{user_declined_reqs}}</p>
          </div>
          <div
            class="col-2"
            *ngIf="req.request_type != 'NEW_LANDLORD_REQ' && req.request_type != 'NEW_TENANT_AC'"
          >
            <div class="links" (click)="viewUserAllReqs()">
              See all Requests
            </div>
          </div>
          <div class="col">
            <div
              style="
                background: #ffe8af70;
                padding: 20px 20px;
                border-radius: 8px;
              "
            >
              <div class="row">
                <div class="col">
                  <p
                    style="font-size: 13px; font-weight: 500; color: #8f8f8fcf"
                  >
                    More Options
                  </p>
                  <div
                    (click)="flagAsImportant()"
                    *ngIf="req.flag == 0 && req.spam == 0 && req.archive == 0"
                    class="btn doc-btns mr-3"
                  >
                    Flag as Important
                  </div>
                  <div
                    (click)="flagAsImportant()"
                    *ngIf="req.flag == 1 && req.spam == 0 && req.archive == 0"
                    class="btn doc-btns mr-3"
                  >
                    Remove Flag
                  </div>
                  <div
                    (click)="archiveRequest()"
                    *ngIf="req.archive == 0 && req.spam == 0"
                    class="btn doc-btns mr-3"
                  >
                    Archive Request
                  </div>
                  <div
                    (click)="removeFromArchives()"
                    *ngIf="req.archive == 1 && req.spam == 0"
                    class="btn doc-btns mr-3"
                  >
                    Remove from Archive
                  </div>
                  <div
                    (click)="reportAsSpam()"
                    *ngIf="req.spam == 0"
                    class="btn doc-btns"
                  >
                    Report As Spam
                  </div>
                  <div
                    (click)="removeFromSpam()"
                    *ngIf="req.spam == 1"
                    class="btn doc-btns"
                  >
                    Remove from Spam
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
