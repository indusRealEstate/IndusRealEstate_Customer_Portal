<div
  class="card"
  style="margin: 0"
  cdkDrag
  cdkDragRootElement=".cdk-overlay-pane"
>
  <!-- <div class="card-header"></div> -->
  <div class="card-body">
    <div class="col">
      <div class="row m-0 align-items-start w-100">
        <p
          class="mr-2"
          style="font-weight: 500; color: #3c4858b5; font-size: 20px"
        >
          Edit Announcement
        </p>
        <img
          matTooltip="Close"
          matTooltipClass="tooltip"
          matTooltipPosition="above"
          (click)="onCloseDialog()"
          class="mr-2 mt-1 close-icon"
          src="assets/img/svg/req-details/close-circle.svg"
          alt=""
        />
      </div>
      <div class="row">
        <div class="col pl-0">
          <mat-form-field class="textField" appearance="outline">
            <mat-label>Title*</mat-label>
            <input matInput [(ngModel)]="title" placeholder="Ex. Water" />
          </mat-form-field>

          <mat-form-field class="mt-2" class="textField" appearance="outline">
            <mat-label>Building Name*</mat-label>
            <mat-select [(ngModel)]="selected_property">
              <mat-option *ngFor="let item of properties" [value]="item.value">
                {{item.viewValue}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="mt-2" class="textField" appearance="outline">
            <mat-label>Description</mat-label>
            <textarea matInput rows="4" [(ngModel)]="description"></textarea>
          </mat-form-field>

          <span
            class="mt-2"
            style="font-size: 1rem; font-weight: 500; color: #3c4858b5"
            >Is this a emergency notification?</span
          ><br />
          <mat-slide-toggle
            class="mt-2"
            [(ngModel)]="emergency"
          ></mat-slide-toggle>

          
        </div>
      <div class="col pr-0" style="height:35vh; overflow: auto">
        <div
          (click)="fileInput.click()"
          class="btn ml-0 mb-3"
          style="background: #d4aa32"
        >
          Add Documents
        </div>
        <input
          multiple
          hidden
          (change)="onFileSelected($event.target.files)"
          #fileInput
          type="file"
          id="file"
        />

        <div *ngIf="docsFilesUploaded.length != 0">
          <div
            *ngFor="let file of docsFilesUploaded;let index=index"
            class="row m-0 mt-2 align-items-center"
            style="
              background: #d4aa3230;
              border: solid 1px #d4aa32;
              border-radius: 5px;
              padding: 10px 10px;
            "
          >
            <img src="assets/img/svg/documents/document-text.svg" alt="" />
            <span
              class="m-0 ml-3"
              style="
                font-weight: 500;
                text-overflow: ellipsis;
                max-width: 230px;
                overflow: hidden;
                white-space: nowrap;
              "
              >{{file.name == undefined ? file : file.name}}</span
            >
            <img
              (click)="removeUploadedDoc(index)"
              src="assets/img/svg/success-dialog/close-square.svg"
              alt=""
              style="
                position: absolute;
                right: 10px;
                width: 20px;
                cursor: pointer;
              "
            />
          </div>
        </div>
        
      </div>
      <!-- <div class="row w-100">
        <div
            class="btn"
            style="
              background: #3c4858;
              min-width: 120px;
              position: absolute;
              right: 0rem;
              bottom:0;
            "
            (click)="onSubmit()"
          >
            <span>Announce</span>
          </div>
      </div> -->

      <div class="row w-100 justify-content-end align-items-center my-3">
        <span
          class="mt-3"
          *ngIf="formNotFilled"
          style="
            color: #ff0000db;
            font-weight: 500;
            background: #ff000017;
            padding: 7px 7px;
            border: 1px solid #d1000033;
            border-radius: 7px;
            position: absolute;
            left: 2rem;
          "
          >Please fill the form.</span
        >
        <span
          class="mt-3"
          *ngIf="documentNotAdded"
          style="
            color: #ff0000db;
            font-weight: 500;
            background: #ff000017;
            padding: 7px 20px;
            border: 1px solid #d1000033;
            border-radius: 7px;
            position: absolute;
            left: 2rem;
          "
          >Please add atleast 1 document.</span
        >
        <span
            *ngIf="uploading"
            class="ml-3"
            style="font-size: 19px; font-weight: 600; color: #3c4858"
            >{{uploading_progress}}%</span
          >
          <div class="progress-bar ml-0" *ngIf="uploading">
            <div
              class="progress-bar-fill"
              [ngStyle]="{'width.%': uploading_progress % 100}"
            ></div>
          </div>
          <div
            class="btn"
            style="background: #3c4858; min-width: 120px; padding: 10px 20px;position: absolute;
            bottom: 0;
            right: 0;"
            (click)="onSubmit()"
          >
            <span *ngIf="!uploading">Update</span>
            <span
              *ngIf="uploading"
              class="spinner-border spinner-border-m mx-auto"
              style="height: 25px; width: 25px"
            >
            </span>
      </div>
    </div>
  </div>
</div>
