<div
  class="card"
  style="margin: 0"
  cdkDrag
  cdkDragRootElement=".cdk-overlay-pane"
>
  <!-- <div class="card-header"></div> -->
  <div class="card-body">
    <div
      *ngIf="isContentLoading"
      class="d-flex justify-content-center align-items-center"
      style="height: 40rem"
    >
      <span class="spinner-border spinner-border-m mr-2" style="color: #d4aa32">
      </span>
    </div>
    <div class="col" *ngIf="!isContentLoading">
      <div class="row m-0 align-items-start w-100">
        <p
          class="mr-2 mb-4"
          style="font-weight: 500; color: #3c4858b5; font-size: 20px"
        >
          Reniew Contract
        </p>
        <img
          matTooltip="Close"
          matTooltipClass="tooltip"
          matTooltipPosition="above"
          (click)="onCloseDialog()"
          class="mr-2 mt-1 close-icon"
          src="assets/img/svg/req-details/close-circle.svg"
          alt=""
        />
      </div>
      <div class="row m-0">
        <div class="col pl-0">
          <div
            class="card m-0"
            style="
              box-shadow: none;
              border: 1px solid #e6ebf1;
              padding: 15px 15px;
            "
          >
            <div class="row m-0">
              <div class="col pl-0">
                <p class="mb-0" style="font-size: 15px; font-weight: 600">
                  Property
                </p>
                <span class="prop-name">{{property | titlecase}}</span>
              </div>
              <div class="col pr-0">
                <p class="mb-0" style="font-size: 15px; font-weight: 600">
                  Unit
                </p>
                <span> {{unit_data}} </span>
              </div>
            </div>
            <div class="row m-0 mt-3">
              <div class="col pl-0">
                <p class="mb-0" style="font-size: 15px; font-weight: 600">
                  Contract Ended Date
                </p>
                <span class="prop-name"
                  >{{contract_end_date | date:'M/d/y'}}</span
                >
              </div>
              <div class="col pr-0">
                <p class="mb-0" style="font-size: 15px; font-weight: 600">
                  Tenant
                </p>
                <span class="prop-name"
                  >{{tenant | titlecase}}</span
                >
              </div>
            </div>
          </div>

          <mat-form-field
            class="mat-datepicker mt-3 textField"
            appearance="outline"
          >
            <mat-label>New Contract Start Date</mat-label>
            <input
              matInput
              [matDatepicker]="start_date_picker"
              [(ngModel)]="contract_new_start_date"
            />
            <mat-datepicker-toggle
              matIconSuffix
              [for]="start_date_picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #start_date_picker></mat-datepicker>
          </mat-form-field>

          <mat-form-field
            class="mat-datepicker textField"
            appearance="outline"
            style="margin-top: -10px !important"
          >
            <mat-label>New Contract End Date</mat-label>
            <input
              matInput
              [matDatepicker]="end_date_picker"
              [(ngModel)]="contract_new_end_date"
            />
            <mat-datepicker-toggle
              matIconSuffix
              [for]="end_date_picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #end_date_picker></mat-datepicker>
          </mat-form-field>
        </div>
        <div class="col pr-0" style="height: 35vh; overflow: auto">
          <div
            (click)="fileInput.click()"
            class="btn ml-0 mb-3"
            style="background: #d4aa32"
          >
            Add Documents
          </div>
          <input
            multiple
            hidden
            (change)="onFileSelected($event.target.files)"
            #fileInput
            type="file"
            id="file"
          />

          <div *ngIf="docsFilesUploaded.length != 0">
            <div
              *ngFor="let file of docsFilesUploaded;let index=index"
              class="row m-0 mt-2 align-items-center"
              style="
                background: #d4aa3230;
                border: solid 1px #d4aa32;
                border-radius: 5px;
                padding: 10px 10px;
              "
            >
              <img src="assets/img/svg/documents/document-text.svg" alt="" />
              <span
                class="m-0 ml-3"
                style="
                  font-weight: 500;
                  text-overflow: ellipsis;
                  max-width: 230px;
                  overflow: hidden;
                  white-space: nowrap;
                "
                >{{file.name}}</span
              >
              <img
                (click)="removeUploadedDoc(index)"
                src="assets/img/svg/success-dialog/close-square.svg"
                alt=""
                style="
                  position: absolute;
                  right: 10px;
                  width: 20px;
                  cursor: pointer;
                "
              />
            </div>
          </div>
        </div>

        <div class="row m-0 w-100 justify-content-end align-items-center my-3">
          <span
            class="mt-3"
            *ngIf="formNotFilled"
            style="
              color: #ff0000db;
              font-weight: 500;
              background: #ff000017;
              padding: 7px 7px;
              border: 1px solid #d1000033;
              border-radius: 7px;
              position: absolute;
              left: 2rem;
            "
            >Please fill the form.</span
          >
          <span
            class="mt-3"
            *ngIf="documentNotAdded"
            style="
              color: #ff0000db;
              font-weight: 500;
              background: #ff000017;
              padding: 7px 7px;
              border: 1px solid #d1000033;
              border-radius: 7px;
              position: absolute;
              left: 2rem;
            "
            >Please add new contract documents.</span
          >
          <!-- <span
            class="mt-3"
            *ngIf="documentNotAdded"
            style="
              color: #ff0000db;
              font-weight: 500;
              background: #ff000017;
              padding: 7px 20px;
              border: 1px solid #d1000033;
              border-radius: 7px;
              position: absolute;
              left: 2rem;
            "
            >Please add atleast 1 document.</span
          > -->
          <span
            *ngIf="uploading"
            class="mr-3"
            style="font-size: 19px; font-weight: 600; color: #3c4858"
            >{{uploading_progress}}%</span
          >
          <div class="progress-bar mr-4" *ngIf="uploading">
            <div
              class="progress-bar-fill"
              [ngStyle]="{'width.%': uploading_progress % 100}"
            ></div>
          </div>
          <div
            class="btn"
            style="background: #3c4858; min-width: 120px"
            (click)="onSubmit()"
          >
            <span *ngIf="!uploading">Submit</span>
            <span
              *ngIf="uploading"
              class="spinner-border spinner-border-m mx-auto"
              style="height: 20px; width: 20px"
            >
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
